题目来源：https://www.nowcoder.com/practice/a0ef4574056e4a219ee7d651ba82efef?tpId=375&sourceUrl=%2Fexam%2Foj%3FquestionJobId%3D2%26subTabName%3Donline_coding_page&difficulty=&judgeStatus=&tags=&title=&gioEnter=menu  
2025年12月8日

## 一、问题背景与目标
在企业培训系统中，`cultivate_tb` 表用于记录员工参与的课程信息，其中 `course` 字段包含员工所参加的全部课程名称，可能以逗号分隔存储。例如：

- "course1,course2,course3"
- "course3"
- "course2,course4"

目标是 **查询所有参加过“course3”课程的员工的员工编号（staff_id）与姓名（staff_name）**。

因为员工信息存储在 `staff_tb` 表中，因此需要通过 join 来获取员工的基础信息。

---

## 二、最终 SQL

```sql
select 
    s.staff_id,
    s.staff_name
from staff_tb s
join cultivate_tb c on s.staff_id = c.staff_id
where c.course like '%course3%';
```

## 三、解题思路

1. **确定数据来源与关联方式**  
   员工基本信息在 `staff_tb`，课程参与记录在 `cultivate_tb`，两表通过 `staff_id` 建立关联，因此需使用 `JOIN` 将两张表连接起来。

2. **识别目标查询条件**  
   目标是找出参加过 `course3` 的员工，而 `course` 字段以字符串形式记录员工参加的所有课程，因此需要判断该字段是否包含 `course3`。

3. **使用模糊匹配筛选记录**  
   通过 `LIKE '%course3%'` 判断课程列表是否包含 `course3`，筛选出符合条件的培训记录。

4. **选择需要返回的字段**  
   题目要求返回员工编号与员工姓名，因此 select 中仅保留 `s.staff_id` 和 `s.staff_name`。

---

## 四、相关知识点

### 1. `JOIN`（表连接）
用于从多个表中组合数据。此处通过 `JOIN cultivate_tb c ON s.staff_id = c.staff_id` 获取某员工的课程信息。

### 2. `LIKE` 模糊查询
`LIKE '%course3%'` 用于检查字符串中是否包含指定片段，是处理逗号分隔、多值字符串常用的方法。

### 3. 字符串多值字段的查询方式
当一个字段如 `course` 存储多个值（如 "course1,course3,course5"），常通过 `LIKE` 进行包含判断。

### 4. 字段选择（Projection）
查询结果仅需展示必要字段（员工编号、员工姓名），因此在 SELECT 中明确写出所需字段，避免返回多余列。

